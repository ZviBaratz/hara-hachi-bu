<?xml version="1.0" encoding="UTF-8"?>
<schemalist>
  <schema id="org.gnome.shell.extensions.hara-hachi-bu" path="/org/gnome/shell/extensions/hara-hachi-bu/">

    <!-- UI Settings -->
    <key name="show-system-indicator" type="b">
      <default>true</default>
      <summary>Show system indicator</summary>
      <description>Show indicator icon in the top bar</description>
    </key>

    <key name="show-force-discharge" type="b">
      <default>false</default>
      <summary>Show force discharge toggle</summary>
      <description>Show force discharge toggle in the menu</description>
    </key>

    <key name="indicator-position" type="i">
      <default>0</default>
      <summary>Indicator position</summary>
      <description>Position of the indicator in the top bar</description>
    </key>

    <key name="indicator-position-index" type="i">
      <default>0</default>
      <summary>Indicator position index</summary>
      <description>Internal index for indicator positioning</description>
    </key>

    <key name="indicator-position-max" type="i">
      <default>0</default>
      <summary>Maximum indicator position</summary>
      <description>Maximum indicator position value</description>
    </key>

    <key name="auto-switch-enabled" type="b">
      <default>true</default>
      <summary>Automatically switch profiles based on rules</summary>
      <description>When enabled, profiles switch automatically based on their configured rules</description>
    </key>

    <key name="auto-manage-paused" type="b">
      <default>false</default>
      <summary>Auto-management paused</summary>
      <description>True when user has manually overridden auto-switching, pausing automatic profile changes</description>
    </key>

    <key name="resume-on-state-change" type="b">
      <default>true</default>
      <summary>Resume auto-management on state change</summary>
      <description>When paused, automatically resume auto-management when system state changes (display connect/disconnect, power source change)</description>
    </key>

    <key name="show-battery-health" type="b">
      <default>true</default>
      <summary>Show battery health in Quick Settings</summary>
      <description>Display battery health information in the Quick Settings panel</description>
    </key>

    <key name="battery-health-threshold" type="i">
      <default>100</default>
      <range min="0" max="100"/>
      <summary>Battery health display threshold</summary>
      <description>Show battery health only when below this percentage (100 = always show)</description>
    </key>

    <!-- Current State -->
    <key name="current-power-mode" type="s">
      <default>'balanced'</default>
      <summary>Current power mode</summary>
      <description>Currently active power profile (performance, balanced, power-saver)</description>
    </key>

    <key name="current-battery-mode" type="s">
      <default>'balanced'</default>
      <summary>Current battery mode</summary>
      <description>Currently active battery mode (full-capacity, balanced, max-lifespan)</description>
    </key>

    <key name="force-discharge-enabled" type="b">
      <default>false</default>
      <summary>Force discharge enabled</summary>
      <description>Whether force discharge is currently active</description>
    </key>

    <key name="auto-manage-battery-levels" type="b">
      <default>false</default>
      <summary>Automatically manage battery levels with force discharge</summary>
      <description>When enabled, automatically enables force discharge when battery exceeds end threshold (AC only) and disables when battery reaches start threshold. Requires force discharge hardware support.</description>
    </key>

    <key name="hide-builtin-power-profile" type="b">
      <default>true</default>
      <summary>Hide built-in power profile indicator</summary>
      <description>Hide GNOME Shell's built-in power profile quick settings indicator</description>
    </key>

    <!-- Custom Profiles (v2.0+) -->
    <key name="custom-profiles" type="s">
      <default>'[]'</default>
      <summary>Custom profile definitions</summary>
      <description>JSON array of custom profile objects with structure: [{id, name, powerMode, batteryMode, rules, schedule}]. Rules are arrays of conditions: [{param, op, value}].</description>
    </key>

    <!-- Battery Mode Thresholds -->
    <key name="threshold-full-start" type="i">
      <range min="80" max="99"/>
      <default>95</default>
      <summary>Full capacity start threshold</summary>
      <description>Start charging threshold for full capacity mode</description>
    </key>

    <key name="threshold-full-end" type="i">
      <range min="85" max="100"/>
      <default>100</default>
      <summary>Full capacity end threshold</summary>
      <description>Stop charging threshold for full capacity mode</description>
    </key>

    <key name="threshold-balanced-start" type="i">
      <range min="60" max="80"/>
      <default>75</default>
      <summary>Balanced mode start threshold</summary>
      <description>Start charging threshold for balanced mode</description>
    </key>

    <key name="threshold-balanced-end" type="i">
      <range min="65" max="90"/>
      <default>80</default>
      <summary>Balanced mode end threshold</summary>
      <description>Stop charging threshold for balanced mode</description>
    </key>

    <key name="threshold-lifespan-start" type="i">
      <range min="40" max="60"/>
      <default>55</default>
      <summary>Max lifespan start threshold</summary>
      <description>Start charging threshold for max lifespan mode</description>
    </key>

    <key name="threshold-lifespan-end" type="i">
      <range min="45" max="70"/>
      <default>60</default>
      <summary>Max lifespan end threshold</summary>
      <description>Stop charging threshold for max lifespan mode</description>
    </key>

    <!-- Device Capabilities (written by extension, read by prefs) -->
    <key name="device-has-start-threshold" type="b">
      <default>false</default>
      <summary>Device supports start threshold</summary>
      <description>Whether the detected battery device supports a start charging threshold. Written by the extension at startup.</description>
    </key>

    <!-- One-Time Notification Flags -->
    <key name="helper-notification-shown" type="b">
      <default>false</default>
      <summary>Helper notification shown</summary>
      <description>Whether the one-time helper script installation notification has been shown</description>
    </key>

    <!-- Boost Charge -->
    <key name="boost-charge-timeout-hours" type="i">
      <range min="1" max="12"/>
      <default>4</default>
      <summary>Boost charge safety timeout (hours)</summary>
      <description>Maximum duration for boost charge before auto-reverting to previous battery mode</description>
    </key>

    <!-- Migration Tracking -->
    <key name="migration-version" type="i">
      <default>6</default>
      <summary>Migration version</summary>
      <description>Internal tracking of completed data migrations.</description>
    </key>

  </schema>
</schemalist>
